# 서울시 자전거 대여 데이터 사전

## 테이블 정보
- **테이블명**: seoul-bike-demo-2025.bike_db.bike_rental_data
- **형식**: Apache Iceberg (S3 Tables)
- **데이터 기간**: 2024년 12월
- **총 레코드 수**: 100,000건
- **원본 데이터**: s3://seoul-bike-rental-public-data/seoul-bike-sample-10k.csv

## 컬럼 정의

| 컬럼명 | 데이터 타입 | 설명 | 예시 | 민감도 |
|--------|-------------|------|------|--------|
| `rental_id` | STRING | 대여 고유 식별자 | SPB-38032, SPB-46934 | 일반 |
| `station_id` | STRING | 정거장 고유 식별자 | 774, 602 | 일반 |
| `station_name` | STRING | 정거장명 | 등촌역 4번 출구, 장안동 사거리 | 일반 |
| `rental_date` | TIMESTAMP | 대여 시작 시간 | 2024-12-06 21:05:02 | 일반 |
| `return_date` | TIMESTAMP | 반납 시간 | 2024-12-06 22:09:36 | 일반 |
| `usage_min` | INTEGER | 대여 시간(분) | 64, 4, 9 | 일반 |
| `distance_meter` | DECIMAL | 이동 거리(미터) | 0.00, 744.67, 825.89 | 일반 |
| `birth_year` | INTEGER | 출생년도 | 1986, 2007, 2003 | 민감 |
| `gender` | STRING | 성별 | M, F | 민감 |
| `user_type` | STRING | 사용자 유형 | 내국인 | 일반 |
| `district` | STRING | 행정구역 | 양천구, 동대문구, 성동구 | 일반 |

## 실제 데이터 분포

### 지역별 연령대 특성 (상위 5개 구)

#### 강서구 (13,238건) - 30대 중심
- **30대**: 3,984건 (30.1%) - 가장 높음
- **20대**: 3,239건 (24.5%)
- **40대**: 2,574건 (19.4%)
- **50대**: 1,529건 (11.5%)
- **10대**: 1,349건 (10.2%)
- **60대+**: 521건 (3.9%)

#### 영등포구 (8,870건) - 30대 중심
- **30대**: 2,861건 (32.3%) - 가장 높음
- **20대**: 2,278건 (25.7%)
- **40대**: 1,676건 (18.9%)
- **50대**: 1,048건 (11.8%)
- **10대**: 609건 (6.9%)
- **60대+**: 397건 (4.5%)

#### 송파구 (8,217건) - 30대 중심
- **30대**: 2,558건 (31.1%) - 가장 높음
- **20대**: 2,119건 (25.8%)
- **40대**: 1,566건 (19.0%)
- **50대**: 1,071건 (13.0%)
- **10대**: 474건 (5.8%)
- **60대+**: 435건 (5.3%)

#### 양천구 (6,555건) - 10대 이용률 높음
- **10대**: 1,458건 (22.2%) - 다른 구 대비 매우 높음
- **40대**: 1,392건 (21.2%)
- **20대**: 1,375건 (21.0%)
- **30대**: 1,112건 (17.0%)
- **50대**: 924건 (14.1%)
- **60대+**: 294건 (4.5%)

#### 노원구 (6,321건) - 20대 중심
- **20대**: 1,932건 (30.6%) - 가장 높음
- **30대**: 1,212건 (19.2%)
- **40대**: 1,030건 (16.3%)
- **50대**: 879건 (13.9%)
- **10대**: 872건 (13.8%)
- **60대+**: 396건 (6.3%)

#### 지역별 특성 요약
- **30대 중심 지역**: 강서구, 영등포구, 송파구 (업무/주거 밀집 지역)
- **20대 중심 지역**: 노원구 (대학가 인근)
- **10대 이용률 높은 지역**: 양천구 (22.2%, 전체 평균 8.8%의 2.5배)

### 성별-연령대 교차 분포
| 연령대 | 남성(M) | 여성(F) | 결측치 | 총계 | 남성 비율 |
|--------|---------|---------|--------|------|-----------|
| **20대** | 15,511건 | 9,903건 | 1,522건 | 26,936건 | 61.0% |
| **30대** | 16,526건 | 9,021건 | 1,130건 | 26,677건 | 64.4% |
| **40대** | 12,149건 | 5,974건 | 639건 | 18,762건 | 67.0% |
| **50대** | 8,638건 | 4,160건 | 509건 | 13,307건 | 67.5% |
| **10대** | 6,660건 | 2,071건 | 2건 | 8,733건 | 76.3% |
| **60대+** | 4,053건 | 1,134건 | 130건 | 5,317건 | 78.1% |

#### 성별 특성
- **전체 성별 분포**: 남성 63.7%, 여성 32.4%, 결측치 3.9%
- **연령대가 높을수록 남성 비율 증가**: 10대 76.3% → 60대+ 78.1%
- **20-30대 여성 이용률이 상대적으로 높음**: 20대 39.0%, 30대 35.2%

### 사용자 유형별 분포
- **내국인**: 100,000건 (100.0%)

### 연령대별 분포 (실제 분석 결과)
- **20대**: 26,936건 (27.0%) - 가장 많은 이용층
- **30대**: 26,677건 (26.7%) - 20대와 거의 동일
- **40대**: 18,762건 (18.8%) - 세 번째로 많은 이용층
- **50대**: 13,307건 (13.3%) - 중간 이용층
- **10대**: 8,733건 (8.8%) - 상대적으로 적은 이용
- **60대+**: 5,317건 (5.3%) - 가장 적은 이용층

#### 연령 통계
- **평균 나이**: 36.4세
- **중앙값 나이**: 34.0세
- **연령 범위**: 14세 ~ 84세
- **표준편차**: 13.1세

#### 주요 연령별 분포 (상위 5개)
1. **30세 (1994년생)**: 3,714건 (3.72%)
2. **29세 (1995년생)**: 3,663건 (3.67%)
3. **28세 (1996년생)**: 3,575건 (3.58%)
4. **26세 (1998년생)**: 3,449건 (3.46%)
5. **27세 (1997년생)**: 3,441건 (3.45%)

## 데이터 통계

### 연령대별 이용 패턴 분석

#### 대여 시간 패턴
| 연령대 | 평균 대여 시간 | 중앙값 | 특징 |
|--------|----------------|--------|------|
| **10대** | 14.2분 | 8.0분 | 가장 짧은 이용 시간 |
| **20대** | 14.9분 | 8.0분 | 효율적 단거리 이용 |
| **30대** | 16.3분 | 8.0분 | 업무 목적 이용 증가 |
| **40대** | 18.1분 | 10.0분 | 여유로운 이용 패턴 |
| **50대** | 19.8분 | 11.0분 | 긴 시간 이용 선호 |
| **60대+** | 23.1분 | 12.0분 | 가장 긴 이용 시간 |

#### 이동 거리 패턴
| 연령대 | 평균 이동 거리 | 중앙값 | 특징 |
|--------|----------------|--------|------|
| **10대** | 1,582m | 1,165m | 가장 짧은 이동 거리 |
| **20대** | 1,598m | 1,133m | 효율적 단거리 이동 |
| **30대** | 1,700m | 1,143m | 통근/업무 목적 이동 |
| **40대** | 1,926m | 1,241m | 중거리 이동 증가 |
| **50대** | 2,145m | 1,385m | 여유로운 장거리 이용 |
| **60대+** | 2,285m | 1,420m | 가장 긴 이동 거리 |

#### 이용 패턴 특성
- **연령이 높을수록 대여 시간과 이동 거리 증가**
- **젊은 층 (10-20대)**: 짧고 빠른 이동 선호 (평균 14-15분, 1.6km)
- **중년층 (30-40대)**: 업무 목적의 효율적 이용 (평균 16-18분, 1.7-1.9km)
- **고연령층 (50대+)**: 여유로운 장시간 이용 (평균 20분+, 2km+)

### 시간대별 이용 패턴
- **새벽 시간대** (00:00-06:00): 낮은 이용률
- **출근 시간대** (07:00-09:00): 높은 이용률
- **점심 시간대** (12:00-14:00): 중간 이용률
- **퇴근 시간대** (17:00-19:00): 최고 이용률
- **저녁 시간대** (20:00-23:00): 중간 이용률

## 역할별 접근 권한

### 🔑 LF_DataStewardRole
- **접근 범위**: 전체 데이터 (100,000건)
- **접근 컬럼**: 전체 11개 컬럼
- **필터링**: 없음
- **예상 분석 결과**: 전체 서울시 자전거 이용 현황

### 🔑 LF_GangnamAnalyticsRole
- **접근 범위**: district = '강남구' (예상 ~3,000건)
- **접근 컬럼**: 10개 (birth_year 제외)
- **필터링**: Row-level (강남구만)
- **예상 분석 결과**: 강남구 지역 특화 분석

### 🔑 LF_OperationRole
- **접근 범위**: 전체 데이터 (100,000건)
- **접근 컬럼**: 8개 (운영 관련만)
- **제외 컬럼**: birth_year, gender, user_type
- **예상 분석 결과**: 운영 효율성 및 정거장 이용률 분석

### 🔑 LF_MarketingPartnerRole (NEW!)
- **접근 범위**: district = '강남구' AND birth_year BETWEEN 1990 AND 2005 (20-30대)
- **예상 데이터량**: 약 1,500-2,000건
  - 강남구 전체: 약 3,000건 (전체의 3%)
  - 강남구 내 20-30대: 약 1,650건 (강남구의 55% = 20대 24.5% + 30대 30.1%)
- **접근 컬럼**: 9개 (마케팅 관련)
- **제외 컬럼**: birth_year, usage_min
- **필터링**: Multi-dimensional (강남구 + 20-30대)
- **예상 분석 결과**: 강남구 20-30대 타겟 마케팅 분석

## 샘플 쿼리

### Data Steward (전체 접근)
```sql
SELECT district, 
       EXTRACT(YEAR FROM CURRENT_DATE) - birth_year as age,
       count(*) as rental_count, 
       avg(usage_min) as avg_duration,
       avg(distance_meter) as avg_distance
FROM bike_db.bike_rental_data 
GROUP BY district, EXTRACT(YEAR FROM CURRENT_DATE) - birth_year
ORDER BY rental_count DESC
LIMIT 20;
```

### Gangnam Analytics (강남구만)
```sql
SELECT station_name, gender, count(*) as rental_count,
       avg(usage_min) as avg_duration,
       avg(distance_meter) as avg_distance
FROM bike_db.bike_rental_data 
-- Lake Formation이 자동으로 district = '강남구' 필터 적용
GROUP BY station_name, gender
ORDER BY rental_count DESC;
```

### Operation (운영 데이터만)
```sql
SELECT district, station_name, count(*) as rental_count,
       avg(usage_min) as avg_duration,
       date_trunc('hour', rental_date) as hour_of_day
FROM bike_db.bike_rental_data 
GROUP BY district, station_name, date_trunc('hour', rental_date)
ORDER BY rental_count DESC
LIMIT 50;
-- birth_year, gender 컬럼 접근 불가
```

### Marketing Partner (강남구 20-30대만)
```sql
SELECT station_name, gender, count(*) as target_count,
       avg(distance_meter) as avg_distance,
       date_trunc('day', rental_date) as rental_day
FROM bike_db.bike_rental_data 
-- Lake Formation이 자동으로 district = '강남구' AND birth_year BETWEEN 1990 AND 2005 필터 적용
GROUP BY station_name, gender, date_trunc('day', rental_date)
ORDER BY target_count DESC;
```

## 데이터 품질 정보

### 데이터 정제 과정
1. **원본 데이터**: 641,228건
2. **랜덤 샘플링**: 100,000건 (15.6% 추출)
3. **필터링 조건**: birth_year != 'N', gender != 'N', user_type != 'N', station_id != 'N'

### 데이터 무결성
- **중복 제거**: rental_id 기준 중복 없음
- **날짜 유효성**: 모든 rental_date, return_date 유효성 검증 완료
- **대여 시간 검증**: return_date >= rental_date 조건 만족
- **지역 정보**: 대부분의 district 값 유효성 확인 (일부 NULL 존재)

### 결측치 현황
- **station_name**: 'N' 값 235개 (0.2%)
- **gender**: NULL 값 3,902개 (3.9%)
- **district**: NULL 값 2,028개 (2.0%)
- **birth_year**: 무효/결측 268개 (0.3%) - 유효 범위: 1940-2010년
- **기타 컬럼**: 결측치 없음

### 연령 데이터 품질
- **유효한 연령 데이터**: 99,732건 (99.7%)
- **연령 범위**: 14세-84세 (2010년-1940년생)
- **평균 연령**: 36.4세 (표준편차 13.1세)
- **연령 분포**: 정규분포에 가까운 형태, 20-30대가 전체의 53.7%

### 익명화 처리
- **개인정보**: 실제 개인 식별 정보 제거
- **위치정보**: 정거장명은 실제 명칭 사용하되 개인 식별 불가
- **시간정보**: 실제 대여 시간 패턴 유지

## 파일 정보

### 샘플 데이터 파일
- **파일명**: seoul-bike-sample-10k.csv
- **위치**: s3://seoul-bike-rental-public-data/seoul-bike-sample-10k.csv
- **크기**: 약 15MB
- **인코딩**: UTF-8
- **구분자**: 쉼표(,)
- **헤더**: 포함

### 다운로드 방법
```bash
# AWS CLI를 통한 다운로드
aws s3 cp s3://seoul-bike-rental-public-data/seoul-bike-sample-10k.csv ./

# 또는 Python boto3를 통한 다운로드
import boto3
s3 = boto3.client('s3')
s3.download_file('seoul-bike-rental-public-data', 'seoul-bike-sample-10k.csv', 'local-file.csv')
```

## Lake Formation FGAC 시나리오

### 시나리오 1: 데이터 관리자 (Data Steward)
**목적**: 전체 데이터 품질 관리 및 거버넌스
- 모든 컬럼 접근 가능
- 전체 지역 데이터 분석
- 데이터 품질 이슈 식별 및 해결

### 시나리오 2: 강남구 분석가 (Gangnam Analyst)
**목적**: 강남구 지역 특화 분석
- 강남구 데이터만 접근 (Row-level 필터링)
- 개인 식별 정보(birth_year) 접근 차단
- 지역별 이용 패턴 분석

### 시나리오 3: 운영팀 (Operation)
**목적**: 전체 운영 효율성 분석
- 전체 지역 데이터 접근
- 개인정보(birth_year, gender) 접근 차단
- 정거장별 이용률 및 운영 최적화 분석

### 시나리오 4: 마케팅 파트너 (Marketing Partner)
**목적**: 타겟 고객 마케팅 분석
- 강남구 + 20-30대만 접근 (Multi-dimensional 필터링)
- 개인 식별 정보 및 상세 이용 정보 접근 차단
- 타겟 고객 행동 패턴 분석

---

**📊 데이터 업데이트**: 2025년 7월 27일
**📋 버전**: v3.1 (100,000건 랜덤 샘플 + 연령별 분포 분석)
**🔒 개인정보 보호**: 모든 개인 식별 정보 익명화 처리 완료
**📈 연령 분석**: 99,732건 대상 상세 연령별 분포 및 이용 패턴 분석 완료
